{
  "module_id": "DFPDeployment",
  "module_name": "dfp_deployment",
  "namespace": "morpheus",
  "fsspec": {
    "loaders": [{
        "id": "fsspec"
    }]
  },
  "DFPTrainingPipe": {
    "DFPPreproc": {
      "FileBatcher": {
        "period": "D",
        "sampling_rate_s": 0,
        "start_time": null,
        "end_time": null,
        "iso_date_regex_pattern": "(?P<year>\\d{4})-(?P<month>\\d{1,2})-(?P<day>\\d{1,2})T(?P<hour>\\d{1,2})(:|_)(?P<minute>\\d{1,2})(:|_)(?P<second>\\d{1,2})(?P<microsecond>\\.\\d{1,6})?Z",
        "timestamp_column_name": "timestamp",
        "userid_column_name": "username",
        "parser_kwargs": {
          "lines": false,
          "orient": "records"
        },
        "cache_dir": "./.cache/dfp",
        "filter_null": true,
        "file_type": "JSON",
        "schema": {
          "schema_str": null,
          "encoding": null
        },
        "task_type": "inference"
      },
      "file_to_df": {
        "loaders": [{
            "id": "file_to_df"
        }],
        "module_name": "file_to_df_dataloader_tra"
      },
      "DFPSplitUsers": {
        "include_generic": true,
        "include_individual": false,
        "skip_users": [],
        "only_users": [],
        "timestamp_column_name": "timestamp",
        "userid_column_name": "username",
        "fallback_username": "generic_user"
      }
    },
    "DFPRollingWindow": {
      "min_history": 300,
      "min_increment": 300,
      "max_history": null,
      "cache_dir": "./.cache/dfp",
      "timestamp_column_name": "timestamp"
    },
    "DFPDataPrep": {
      "timestamp_column_name": "timestamp",
      "userid_column_name": "username",
      "schema": {
        "schema_str": null,
        "encoding": null
      }
    },
    "DFPTraining": {
      "model_kwargs": {
        "encoder_layers": [
          512,
          500
        ],
        "decoder_layers": [
          512
        ],
        "activation": "relu",
        "swap_p": 0.2,
        "lr": 0.001,
        "lr_decay": 0.99,
        "batch_size": 512,
        "verbose": false,
        "optimizer": "sgd",
        "scaler": "standard",
        "min_cats": 1,
        "progress_bar": false,
        "device": "cuda"
      },
      "feature_columns": null,
      "epochs": 30,
      "validation_size": 0.1
    },
    "MLFlowModelWriter": {
      "model_name_formatter": null,
      "experiment_name_formatter": null,
      "timestamp_column_name": "timestamp",
      "conda_env": {
        "channels": [
          "defaults",
          "conda-forge"
        ],
        "dependencies": [
          "python=3.8",
          "pip"
        ],
        "pip": [
          "mlflow",
          "dfencoder"
        ],
        "name": "mlflow-env"
      },
      "databricks_permissions": null
    }
  },
  "DFPInferencePipe": {
    "DFPPreproc": {
      "FileBatcher": {
        "period": "D",
        "sampling_rate_s": 0,
        "start_time": null,
        "end_time": null,
        "iso_date_regex_pattern": "(?P<year>\\d{4})-(?P<month>\\d{1,2})-(?P<day>\\d{1,2})T(?P<hour>\\d{1,2})(:|_)(?P<minute>\\d{1,2})(:|_)(?P<second>\\d{1,2})(?P<microsecond>\\.\\d{1,6})?Z",
        "timestamp_column_name": "timestamp",
        "userid_column_name": "username",
        "parser_kwargs": {
          "lines": false,
          "orient": "records"
        },
        "cache_dir": "./.cache/dfp",
        "filter_null": true,
        "file_type": "JSON",
        "schema": {
          "schema_str": null,
          "encoding": null
        },
        "task_type": "inference"
      },
      "file_to_df": {
        "loaders": [{
            "id": "file_to_df"
        }],
        "module_name": "file_to_df_dataloader_inf"
      },
      "DFPSplitUsers": {
        "include_generic": true,
        "include_individual": false,
        "skip_users": [],
        "only_users": [],
        "timestamp_column_name": "timestamp",
        "userid_column_name": "username",
        "fallback_username": "generic_user"
      }
    },
    "DFPRollingWindow": {
      "module_id": "DFPRollingWindow",
      "module_name": "dfp_rolling_window",
      "namespace": "morpheus",
      "min_history": 1,
      "min_increment": 0,
      "max_history": null,
      "cache_dir": "./.cache/dfp",
      "timestamp_column_name": "timestamp"
    },
    "DFPDataPrep": {
      "timestamp_column_name": "timestamp",
      "userid_column_name": "username",
      "schema": {
        "schema_str": null,
        "encoding": null
      }
    },
    "DFPInference": {
      "model_name_formatter": null,
      "fallback_username": "username",
      "timestamp_column_name": "timestamp"
    },
    "FilterDetections": {
      "field_name": "mean_abs_z",
      "threshold": 2.0,
      "filter_source": "DATAFRAME",
      "schema": {
        "input_message_type": null,
        "encoding": null
      }
    },
    "DFPPostProcessing": {
      "timestamp_column_name": "timestamp"
    },
    "Serialize": {
      "exclude": [
        "batch_count",
        "origin_hash",
        "_row_hash",
        "_batch_id"
      ],
      "use_cpp": null
    },
    "WriteToFile": {
      "filename": null,
      "overwrite": true
    }
  }
}
